// Pressure v1.0.1 | Created By Stuart Yamartino | MIT License | 2015-Present
!function(e,t,s){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};if(s===!1)throw new Error("Pressure jQuery requires jQuery is loaded before your jquery.pressure.min.js file");if(s.fn.pressure=function(e,t){return P(this,e,t),this},s.pressureConfig=function(e){v.set(e)},s.pressureMap=function(e,t,s,n,r){return k(e,t,s,n,r)},e===!1)return void console.warn("Pressure requires a window with a document");if("undefined"!=typeof Pressure)if("function"==typeof define&&define.amd){var c=Pressure;define(["pressure"],function(e){return e})}else if("object"===("undefined"==typeof module?"undefined":u(module))&&module.exports){var c=Pressure;module.exports=c}else e.Pressure=Pressure;var h=function(){function e(t,s,n){i(this,e),this.element=t,this.block=s,this.type=v.get("only",n),this.options=n,this.routeEvents()}return o(e,[{key:"routeEvents",value:function(){!m||"desktop"!==this.type&&"mobile"===this.type?w&&g&&("mobile"===this.type||"desktop"!==this.type)?new d(this):!w||"mobile"!==this.type&&"desktop"===this.type?this.instantFail():new p(this):new f(this)}},{key:"instantFail",value:function(){var e=this;this.element.addEventListener(w?"touchstart":"mousedown",function(){return runClosure(e.block,"unsupported",e.element)},!1)}}]),e}(),l=function(){function e(t){i(this,e),this.element=t,this.el=t.element,this.block=t.block,this.pressed=!1,this.deepPressed=!1}return o(e,[{key:"add",value:function(e,t){this.el.addEventListener(e,t,!1)}},{key:"remove",value:function(e,t){this.el.removeEventListener(e,t)}},{key:"setPressed",value:function(e){this.pressed=e}},{key:"setDeepPressed",value:function(e){this.deepPressed=e}},{key:"failOrPolyfill",value:function(e){v.get("polyfill",this.element.options)===!0?this.polyfill=new y(this.element,e):runClosure(this.block,"unsupported",this.el)}},{key:"runClosure",value:function(e){this.block.hasOwnProperty(e)&&this.block[e].apply(this.el||this,Array.prototype.slice.call(arguments,1))}},{key:"preventDefault",value:function(e){v.get("preventDefault",this.element.options)===!0&&(e.preventDefault(),this.el.style.webkitTouchCallout="none",this.el.style.userSelect="none",this.el.style.webkitUserSelect="none",this.el.style.MozUserSelect="none")}}]),e}(),a=function(e){function t(e){return i(this,t),n(this,Object.getPrototypeOf(t).call(this,e))}return r(t,e),o(t,[{key:"$end",value:function(){var e=this;this.add("touchend",function(){e.pressed&&(e.endDeepPress(),e.setPressed(!1),e.runClosure("end"))})}},{key:"startDeepPress",value:function(e){this.deepPressed===!1&&this.runClosure("startDeepPress",e),this.setDeepPressed(!0)}},{key:"endDeepPress",value:function(){this.deepPressed===!0&&this.runClosure("endDeepPress"),this.setDeepPressed(!1)}},{key:"selectTouch",value:function(e){if(1===e.touches.length)return this.returnTouch(e.touches[0],e);for(var t=0;t<e.touches.length;t++)if(e.touches[t].target===this.el)return this.returnTouch(e.touches[t],e)}},{key:"returnTouch",value:function(e,t){return e.force>=.5?this.startDeepPress(t):this.endDeepPress(),e}}]),t}(l),f=function(e){function t(e){i(this,t);var s=n(this,Object.getPrototypeOf(t).call(this,e));return s.$start(),s.$change(),s.$startDeepPress(),s.$endDeepPress(),s.$end(),s}return r(t,e),o(t,[{key:"$start",value:function(){this.add("webkitmouseforcewillbegin",this.startForce.bind(this)),this.add("mousedown",this.support.bind(this))}},{key:"startForce",value:function(e){this.setPressed(!0),this.preventDefault(e),this.runClosure("start",e)}},{key:"support",value:function(e){this.pressed===!1&&this.failOrPolyfill(e)}},{key:"$change",value:function(){var e=this;this.add("webkitmouseforcechanged",function(t){e.pressed&&0!==t.webkitForce&&e.runClosure("change",e.normalizeForce(t.webkitForce),t)})}},{key:"$startDeepPress",value:function(){var e=this;this.add("webkitmouseforcedown",function(t){e.pressed&&(e.setDeepPressed(!0),e.runClosure("startDeepPress",t))})}},{key:"$endDeepPress",value:function(){var e=this;this.add("webkitmouseforceup",function(){e.pressed&&e.deepPressed&&(e.setDeepPressed(!1),e.runClosure("endDeepPress"))}),this.add("mouseleave",function(){e.pressed&&e.deepPressed&&(e.setDeepPressed(!1),e.runClosure("endDeepPress"))})}},{key:"$end",value:function(){var e=this;this.add("mouseup",function(){e.pressed&&(e.setPressed(!1),e.runClosure("end"))}),this.add("mouseleave",function(){e.pressed&&(e.setPressed(!1),e.runClosure("end"))})}},{key:"normalizeForce",value:function(e){return this.reachOne(k(e,1,3,0,1))}},{key:"reachOne",value:function(e){return e>.999?1:e}}]),t}(l),d=function(e){function t(e){i(this,t);var s=n(this,Object.getPrototypeOf(t).call(this,e));return s.$start(),s.$end(),s}return r(t,e),o(t,[{key:"$start",value:function(){var e=this;this.add("touchforcechange",function(t){e.setPressed(!0),e.preventDefault(t),e.runClosure("change",e.selectTouch(t).force,t)}),this.add("touchstart",this.support.bind(this,0))}},{key:"support",value:function(e,t){this.pressed===!1&&e>10?this.failOrPolyfill(t):this.pressed===!1?(e+=1,setTimeout(this.support.bind(this),10,e,t)):this.runClosure("start",t)}}]),t}(a),p=function(e){function t(e){i(this,t);var s=n(this,Object.getPrototypeOf(t).call(this,e));return s.$start(),s.$end(),s}return r(t,e),o(t,[{key:"$start",value:function(){var e=this;this.add("touchstart",function(t){e.forceValueTest=t.touches[0].force,e.support(0,t)})}},{key:"support",value:function(e,t){this.pressed===!1?t.touches[0].force!==this.forceValueTest?this.started(t):10>=e&&this.pressed?setTimeout(this.supportCallback.bind(this),10,e++,t):this.pressed&&this.failOrPolyfill(t):this.started(t)}},{key:"started",value:function(e){this.setPressed(!0),this.preventDefault(e),this.runClosure("start",e),this.runForce(e)}},{key:"runForce",value:function(e){this.pressed&&(this.setPressed(!0),this.touch=this.selectTouch(e),setTimeout(this.runForce.bind(this),10,e),this.runClosure("change",this.touch.force,e))}}]),t}(a),y=function(e){function t(e,s){i(this,t);var r=n(this,Object.getPrototypeOf(t).call(this,e));return r.$start(),r.$change(),r.$end(),r.force=0,r.increment=.01,r.firstRun(s),r}return r(t,e),o(t,[{key:"firstRun",value:function(e){this.preventDefault(e),this.startLogic(e),this.changeLogic(e)}},{key:"$start",value:function(){var e=this;this.add(w?"touchstart":"mousedown",function(t){e.startLogic(t)})}},{key:"startLogic",value:function(e){this.setPressed(!0),runClosure(this.block,"start",this.el,e)}},{key:"$change",value:function(){this.add(w?"touchstart":"mousedown",this.changeLogic.bind(this))}},{key:"changeLogic",value:function(e){this.pressed&&(this.setPressed(!0),this.runForce(e))}},{key:"$end",value:function(){var e=this;this.add(w?"touchend":"mouseup",function(){e.endDeepPress(),e.setPressed(!1),runClosure(e.block,"end",e.el),e.force=0}),this.add("mouseleave",function(){e.endDeepPress(),e.pressed&&runClosure(e.block,"end",e.el),e.setPressed(!1),e.force=0})}},{key:"startDeepPress",value:function(e){this.deepPressed===!1&&runClosure(this.block,"startDeepPress",this.el,e),this.setDeepPressed(!0)}},{key:"endDeepPress",value:function(){this.deepPressed===!0&&runClosure(this.block,"endDeepPress",this.el),this.setDeepPressed(!1)}},{key:"runForce",value:function(e){this.pressed&&(runClosure(this.block,"change",this.el,this.force,e),this.force>=.5?this.startDeepPress(e):this.endDeepPress(),this.force=this.force+this.increment>1?1:this.force+this.increment,setTimeout(this.runForce.bind(this),10,e))}}]),t}(l),v={preventDefault:!0,only:null,polyfill:!1,get:function(e,t){return t.hasOwnProperty(e)?t[e]:this[e]},set:function(e){for(var t in e)e.hasOwnProperty(t)&&this.hasOwnProperty(t)&&"get"!=t&&"set"!=t&&(this[t]=e[t])}},P=function(e,s){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if("string"==typeof e||e instanceof String)for(var r=t.querySelectorAll(e),i=0;i<r.length;i++)new h(r[i],s,n);else if(b(e))new h(e,s,n);else for(var i=0;i<e.length;i++)new h(e[i],s,n)},b=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":u(HTMLElement))?e instanceof HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":u(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},k=function(e,t,s,n,r){return(e-t)*(r-n)/(s-t)+n},m="ontouchstart"in t==!1,w="ontouchstart"in t==!0,g="ontouchforcechange"in t}("undefined"!=typeof window?window:!1,"undefined"!=typeof window?window.document:!1,"undefined"!=typeof jQuery?jQuery:!1);